import{router as Fe}from"@inertiajs/core";import{setupProgress as ee}from"@inertiajs/core";import{createElement as te}from"react";import{createHeadManager as G,router as j}from"@inertiajs/core";import{createElement as b,useEffect as X,useMemo as Y,useState as Z}from"react";import{createContext as Q}from"react";var N=Q(void 0);N.displayName="InertiaHeadContext";var A=N;import{createContext as z}from"react";var $=z(void 0);$.displayName="InertiaPageContext";var E=$;function O({children:l,initialPage:c,initialComponent:s,resolveComponent:p,titleCallback:a,onHeadUpdate:S}){let[d,P]=Z({component:s||null,page:c,key:null}),u=Y(()=>G(typeof window>"u",a||(f=>f),S||(()=>{})),[]);if(X(()=>{j.init({initialPage:c,resolveComponent:p,swapComponent:async({component:f,page:e,preserveState:i})=>{P(r=>({component:f,page:e,key:i?r.key:Date.now()}))}}),j.on("navigate",()=>u.forceUpdate())},[]),!d.component)return b(A.Provider,{value:u},b(E.Provider,{value:d.page},null));let g=l||(({Component:f,props:e,key:i})=>{let r=b(f,{key:i,...e});return typeof f.layout=="function"?f.layout(r):Array.isArray(f.layout)?f.layout.concat(r).reverse().reduce((y,T)=>b(T,{children:y,...e})):r});return b(A.Provider,{value:u},b(E.Provider,{value:d.page},g({Component:d.component,key:d.key,props:d.page.props})))}O.displayName="Inertia";async function U({id:l="app",resolve:c,setup:s,title:p,progress:a={},page:S,render:d}){let P=typeof window>"u",u=P?null:document.getElementById(l),g=S||JSON.parse(u.dataset.page),f=r=>Promise.resolve(c(r)).then(y=>y.default||y),e=[],i=await f(g.component).then(r=>s({el:u,App:O,props:{initialPage:g,initialComponent:r,resolveComponent:f,titleCallback:p,onHeadUpdate:P?y=>e=y:null}}));if(!P&&a&&ee(a),P){let r=await d(te("div",{id:l,"data-page":JSON.stringify(g)},i));return{head:e,body:r}}}import V,{useContext as re,useEffect as oe,useMemo as ne}from"react";var ae=function({children:l,title:c}){let s=re(A),p=ne(()=>s.createProvider(),[s]);oe(()=>()=>{p.disconnect()},[p]);function a(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function S(e){let i=Object.keys(e.props).reduce((r,y)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(y))return r;let T=e.props[y];return T===""?r+` ${y}`:r+` ${y}="${T}"`},"");return`<${e.type}${i}>`}function d(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((i,r)=>i+P(r),"")}function P(e){let i=S(e);return e.props.children&&(i+=d(e)),e.props.dangerouslySetInnerHTML&&(i+=e.props.dangerouslySetInnerHTML.__html),a(e)||(i+=`</${e.type}>`),i}function u(e){return V.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function g(e){return P(u(e))}function f(e){let i=V.Children.toArray(e).filter(r=>r).map(r=>g(r));return c&&!i.find(r=>r.startsWith("<title"))&&i.push(`<title inertia>${c}</title>`),i}return p.update(f(l)),null},se=ae;import{mergeDataIntoQueryString as ie,router as pe,shouldIntercept as ue}from"@inertiajs/core";import{createElement as ce,forwardRef as le,useCallback as de}from"react";var F=()=>{},K=le(({children:l,as:c="a",data:s={},href:p,method:a="get",preserveScroll:S=!1,preserveState:d=null,replace:P=!1,only:u=[],headers:g={},queryStringArrayFormat:f="brackets",onClick:e=F,onCancelToken:i=F,onBefore:r=F,onStart:y=F,onProgress:T=F,onFinish:H=F,onCancel:h=F,onSuccess:M=F,onError:x=F,...L},R)=>{let I=de(t=>{e(t),ue(t)&&(t.preventDefault(),pe.visit(p,{data:s,method:a,preserveScroll:S,preserveState:d??a!=="get",replace:P,only:u,headers:g,onCancelToken:i,onBefore:r,onStart:y,onProgress:T,onFinish:H,onCancel:h,onSuccess:M,onError:x}))},[s,p,a,S,d,P,u,g,e,i,r,y,T,H,h,M,x]);c=c.toLowerCase(),a=a.toLowerCase();let[v,w]=ie(a,p||"",s,f);return p=v,s=w,c==="a"&&a!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${p}" method="${a}" as="button">...</Link>`),ce(c,{...L,...c==="a"?{href:p}:{},ref:R,onClick:I},l)});K.displayName="InertiaLink";var fe=K;import{router as W}from"@inertiajs/core";import ye from"lodash.isequal";import{useCallback as Pe,useEffect as Te,useRef as B,useState as C}from"react";import{router as _}from"@inertiajs/core";import{useEffect as me,useState as ge}from"react";function D(l,c){let[s,p]=ge(()=>{let a=_.restore(c);return a!==void 0?a:l});return me(()=>{_.remember(s,c)},[s,c]),[s,p]}function q(l,c){let s=B(null),p=typeof l=="string"?l:null,[a,S]=C((typeof l=="string"?c:l)||{}),d=B(null),P=B(null),[u,g]=p?D(a,`${p}:data`):C(a),[f,e]=p?D({},`${p}:errors`):C({}),[i,r]=C(!1),[y,T]=C(!1),[H,h]=C(null),[M,x]=C(!1),[L,R]=C(!1),I=t=>t;Te(()=>(s.current=!0,()=>{s.current=!1}),[]);let v=Pe((t,n,o={})=>{let k={...o,onCancelToken:m=>{if(d.current=m,o.onCancelToken)return o.onCancelToken(m)},onBefore:m=>{if(x(!1),R(!1),clearTimeout(P.current),o.onBefore)return o.onBefore(m)},onStart:m=>{if(T(!0),o.onStart)return o.onStart(m)},onProgress:m=>{if(h(m),o.onProgress)return o.onProgress(m)},onSuccess:m=>{if(s.current&&(T(!1),h(null),e({}),r(!1),x(!0),R(!0),P.current=setTimeout(()=>{s.current&&R(!1)},2e3)),o.onSuccess)return o.onSuccess(m)},onError:m=>{if(s.current&&(T(!1),h(null),e(m),r(!0)),o.onError)return o.onError(m)},onCancel:()=>{if(s.current&&(T(!1),h(null)),o.onCancel)return o.onCancel()},onFinish:()=>{if(s.current&&(T(!1),h(null)),d.current=null,o.onFinish)return o.onFinish()}};t==="delete"?W.delete(n,{...k,data:I(u)}):W[t](n,I(u),k)},[u,e]);function w(...t){e(n=>{let o=Object.keys(n).reduce((k,m)=>({...k,...t.length>0&&!t.includes(m)?{[m]:n[m]}:{}}),{});return r(Object.keys(o).length>0),o})}return{data:u,setData(t,n){g(typeof t=="string"?{...u,[t]:n}:typeof t=="function"?o=>t(o):t)},isDirty:!ye(u,a),errors:f,hasErrors:i,processing:y,progress:H,wasSuccessful:M,recentlySuccessful:L,transform(t){I=t},setDefaults(t,n){S(typeof t>"u"?()=>u:o=>({...o,...typeof t=="string"?{[t]:n}:t}))},reset(...t){t.length===0?(g(a),e({}),r(!1)):(g(Object.keys(a).filter(n=>t.includes(n)).reduce((n,o)=>(n[o]=a[o],n),{...u})),w(...t))},setError(t,n){e(o=>{let k={...o,...typeof t=="string"?{[t]:n}:t};return r(Object.keys(k).length>0),k})},clearErrors:w,submit:v,get(t,n){v("get",t,n)},post(t,n){v("post",t,n)},put(t,n){v("put",t,n)},patch(t,n){v("patch",t,n)},delete(t,n){v("delete",t,n)},cancel(){d.current&&d.current.cancel()}}}import{useContext as Se}from"react";function J(){let l=Se(E);if(!l)throw new Error("usePage must be used within the Inertia component");return l}var Pt=Fe;export{se as Head,fe as Link,U as createInertiaApp,Pt as router,q as useForm,J as usePage,D as useRemember};
//# sourceMappingURL=index.esm.js.map
